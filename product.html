<!DOCTYPE html>
<html>
<head><link rel="stylesheet" href="assets/css/style.css"></head>
<body>
<div class="container">
<h2>Customize Your Product</h2>
<input id="qty" type="number" placeholder="Quantity">
<input id="text" placeholder="Custom Text">
<input type="file" id="logo">
<img id="preview" style="max-width:100%;margin-top:10px">
<button onclick="submitOrder()">Place Order</button>
</div>

<script type="module">
import { supabase } from "./supabase/config.js";

async function submitOrder(){
const { data:user } = await supabase.auth.getUser()
const { data:order } = await supabase.from("orders").insert({ user_id:user.user.id }).select().single()

await supabase.from("order_items").insert({
order_id:order.id,
product_id:localStorage.getItem("product"),
quantity:qty.value,
custom_text:text.value
})

alert("Order received. Please call us at 8805969580 to complete payment.")
location.href="products.html"
}
</script>
</body>
</html>

